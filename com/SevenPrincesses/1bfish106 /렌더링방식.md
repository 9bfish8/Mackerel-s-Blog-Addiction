# 고등어의 블로그 중독 1

## CSR 그리고 SSR 리액트의 실행까지의 정리

<br>
<br>


### 참고한 블로그들

1. [SSR vs CSR 차이 💯 총정리](https://dev-ellachoi.tistory.com/28)
    - Dev-Ella의 블로그: SSR과 CSR의 차이점을 상세히 설명

2. [SSR vs CSR (서버사이드렌더링 vs 클라이언트사이드렌더링)](https://proglish.tistory.com/216)
    - Proglish: 렌더링 방식의 장단점과 사용 사례 분석

3. [서버사이드렌더링 vs 클라이언트 사이드렌더링 (SSR과 CSR)](https://velog.io/@jhyun_k/%EC%84%9C%EB%B2%84%EC%82%AC%EC%9D%B4%EB%93%9C%EB%A0%8C%EB%8D%94%EB%A7%81-vs-%ED%81%B4%EB%9D%BC%EC%9D%B4%EC%96%B8%ED%8A%B8-%EC%82%AC%EC%9D%B4%EB%93%9C%EB%A0%8C%EB%8D%94%EB%A7%81-SSR%EA%B3%BC-CSR)
    - jhyun_k의 Velog: SSR과 CSR의 작동 원리와 비교

4. [CSR과 SSR의 차이](https://teawon.github.io/cs/csr-ssr/)
    - Teawon의 GitHub 블로그: 렌더링 방식의 기술적 세부사항 및 선택 기준


<br>
---



블로그를 N개를 봤는데 아무래도..다 똑같은 사진에 같은 설명 뿐이어서 새롭고 간단하게 설명을 해보려한다

### SSR과 CSR의 기본 개념

우선 말그래도 SSR과 CSR은 서버가 렌더링 하느냐 클라이언트가 렌더링 하느냐에 대한 차이점이있다.
근데 이렇게 설명해서 끝나면 좋겠지만.. 인생은 쉽지않기 때문에 ‘소풍’으로 예시를 들어보겠다.
<br/>
<br/>
<br/>

#### 먼저 SSR
이름이 서버라는 선생님이 소풍계획을 전부 세우고 준비를 해두면 나(브라우저)는 가방만 들고가면된다 선생님이 모든걸 준비해주시니깐!
이러면 준비할게 없어서 편하지만 내가 원하는대로 계획을 바꾸기는 어렵고 계획을 바꾸고싶으면 선생님께 요청을 해야한다.


그러니 말그대로 서버는 완전한걸 가져와서 렌더링을 해준다. 매번 내(브라우저)가 서버에 데이터를 요청하고 서버에서 처리하는 방식이라
첫페이지 로딩속도는 빠르겠지만 초기 로딩이후엔 페이지 이동속도가 CSR보다 느릴수밖에 없다 왜..? 내가 계속 요청을 해야 새 페이지를 렌더링 해주니깐..그래서 깜빡임이 심하고 TTV(Time To View)와 TTI(Time To Interact)의 공백시간이 길다..

<br/>
<br/>
<br/>

#### 다시 돌아와서, CSR
아까 그 서버선생님이 이번엔 들어와서 소풍 장소랑 날짜만 정해주시고 나가버렸다. 나머지는 내(브라우저)가 직접 준비를 해야한다. 그래서 모든걸 준비해서 힘들고 시간이 좀 걸렸지만 내가 원하는대로 할수있고 계획이 바뀌어도 내가 직접 바꿀수있다.

그러니 CSR은 HTML파싱부터 JS읽기까지 내(브라우저)가 하기때문에 첫 화면을 띄우는데 ~~뒤지게~~ 오래 걸린다. 근데 첫 로딩만 길고 다음 페이지 전환은 빠르기 때문에 새로고침을 하지않아도 된다 (사용자 경험에 좋음) 그리고 변경된 데이터만 가져오기때문에 트래픽이 감소 된다.

<br/>
<br/>

#### SEO 차이

두개의 다른 차이점은 SEO(검색엔진 최적화)도 들수있는데 .. SSR에선 쉽고 CSR에서는 어렵다.. 왜일까?

SSR은 완성된 책(웹페이지)이기 떄문에 검색엔진이 편하게 모든 내용을 볼수있는 반면에
CSR은 조립식 책(웹페이지)여서 (동적) 검색엔진이 냅다 내용을 완결까지 조립해서 봐야하기 때문이다

<br/>
<br/>
<br/>

#### 그럼 언제 뭘 써야할까?

| SSR | CSR |
|-----|-----|
| - 네트워크가 느릴 때<br>- SEO가 중요할 때<br>- 페이지 이동이 적을 때<br><br>- 예: 뉴스 사이트, 블로그 | - 네트워크가 빠를 때<br>- SEO가 덜 중요할 때<br>- 페이지 이동이 많을 때<br><br>- 예: 대규모 쇼핑몰, 소셜 미디어 |


<br>
<br>

인데… 그럼 리액트는 뭘까??

<br>

#### 리액트의 렌더링 방식

이 이야기에는 SPA가 추가되는데 SPA는 또 뭐길래 나(no 브라우저 yes 고등어)를 괴롭히는걸까?

SPA에 대해 찾아보면 대부분의 내용은 CSR과 같다.
하지만 SPA는 하나의 HTML 페이지로 전체 어플리케이션을 구성하는 구조를 말하며
**모든 SPA는 CSR을 사용하지만 모든 CSR이 SPA가 아니다**를 짚고넘어가야한다.

<br>
예시를 한번 들어보겠다
<br>

1. CSR이지만 SPA가 아닌것
```
   /index.html <- CSR로 내용 렌더링
   /about.html <- CSR로 내용 렌더링
   /contact.html <- CSR로 내용 렌더링
```
=> 이렇게 렌더링 하는 방식은 페이지 이동시 HTML을 불러오기때문에 SPA가 아님


2. CSR + SPA

```
   /index.html <- 모든 페이지의 내용을 CSR로 렌더링
```

=> 페이지 이동시 JavaScript로 내용만 바꾸기 때문에 SPA이다


<br>
<br>

이렇게 되면, <br/>
```아~그럼 리액트는 index.html이 있고 이제 자바스크립트로 된 컴포넌트만 바뀐 내용을 가상돔에 업로드해서 렌더링이 되는거니깐 SPA를 사용한 CSR방식인거구나~```
<br/>   라고 할수있는데 정확하지만 더 풀어보겠다,


초기로딩은 브라우저가 서버에서 하나의 index.html파일을 받아오는데 거기에 리액트 앱을 불러오는 JavaScript파일 링크가 있다
이게 로드되면 리액트 앱이 실행되고 초기 컴포넌트 트리를 만들고 렌더링 한다
그 후는 생각하는 그대로이다 상호작용을 하면 가상 돔에 업데이트 하고 필요한 부분만 실제돔에 업데이트 하고…

...를 그래프로 정리하면서 오늘은 마쳐보겠다





















